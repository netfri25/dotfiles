(defpoll disk-used-kb :interval "30s" :initial "0" "df --output=used / | tail -1 | tr -d ' '")
(defpoll disk-total-kb :interval "1h" :initial "0" "df --output=size / | tail -1 | tr -d ' '")

(defwidget disk-usage []
  (label
    :text "${round(disk-used-kb / disk-total-kb * 100, 1)}%(/)"
    :tooltip "${formatbytes(disk-used-kb * 1024, true)} out of ${formatbytes(disk-total-kb * 1024, true)} on /"
    :class "disk"
  )
)
